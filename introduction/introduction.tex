\chapter{Introduction}\label{chapter:Introduction}
In this thesis, we recount our formalisation and mechanical verification of a focused subset of \emph{synthetic geometry}. This style of geometry, and indeed, this style of pure mathematics, goes back to the earliest records of the subject as we would recognise it today. The style emphasises the deduction of geometrical theorems from very simple axioms governing entities such as points and lines which otherwise have little to define them. Its canonical reference is unquestionably Euclid's \emph{Elements}~\cite{HeathElements}, possibly the most influential mathematical text ever written~\cite{BoyerEuclidInfluence}, and still exemplary of the way pure mathematics is done today, proceeding as it does from definitions to complex hierarchies of theorems.

Synthetic geometry is contrasted with \emph{analytic geometry} or coordinate geometry. In analytic geometry, we solve geometric problems by translating them into systems of algebraic equations and then solving for unknowns. The use of algebra can be highly effective, but, compared to synthetic geometry, it is much less clear how to give a geometric interpretation of the proof steps.

A synthetic proof proceeds by introducing geometric entities which can be visualised as a diagram and reasoned about directly using simple principles, meaning that proof steps have a pleasing geometric interpretation. As we present our own proofs, we urge the reader to follow along with the help of pencil and straight-edge. The subset of synthetic geometry we consider here means that no compasses are necessary!

\section{The \emph{Grundlagen der Geometrie}}
The axioms which will form the basis for our geometry are taken directly from David Hilbert's \emph{Grundlagen der Geometrie}. The text was chosen because in both modern mathematics and in the formal verification community, it has an impressive reputation. By the middle of the 20th century, it had been hailed as the most influential book in a hundred years~\cite{BirkhoffHilbertInfluence}, and by 1971 it had ten published editions. We use the second edition of the English translation, \emph{Foundations of Geometry}~\cite{FoundationsOfGeometry}, translated from the tenth edition of the \emph{Grundlagen der Geometrie}. We follow the presentation to the letter. 

The text can be seen as the spiritual successor to the axiomatics of Euclid's own \emph{Elements}. Euclid's text remains remarkable in what it accomplishes by reducing a wealth of geometric results to a handful of simple axioms and casting basic number theory in geometric terms, but Hilbert massively improves on the rigour.

Hilbert does away with Euclid's confusing list of pseudo-definitions, in which we are told, for example, that a point is ``that which has no part''. Instead, he lets the axioms exhaustively define everything we can know of points, thereby inviting us to leave our intuitions and presumptions at the door. In a famous remark, Hilbert went so far as to demand that all references to points, lines and planes in his text should be replacable with ``mug'', ``table'' and ``chair'' without affecting the logic of the arguments~\cite{TableChairMug}, thereby enforcing a principle from Pasch that all deductions must proceed without reference to the intuitive meaning of the terms involved~\cite{PaschToPeano}. Another way to put this is to say that Hilbert presents his axioms and their consequences without interpretation. If he is successful, all consequences should follow by the \emph{form} of the axioms and not by their content, something we can test by seeing whether the axioms and proofs can be unambigously translated into formal logic.

\section{Ordered Geometry}
Hilbert has five groups of axioms to describe Euclidean geometry, but in this thesis, we are interested in a much more general \emph{ordered geometry}~\cite{AxiomaticsOrderedGeometry}. The scope is defined by the first two of the five axiom groups, providing a more restrictive setting for doing proofs, where we lack a metric to talk about the distances between points, and we lack notions of angle or stipulations about parallel lines with which to discuss direction. We are without a sense of scale or orientation, but as Hilbert shows, we can still make useful definitions.

And as we shall show, we can still demonstrate important results. The main one and, we daresay, the \emph{fundamental result} of ordered geometry, is the Polygonal Jordan Curve Theorem. This theorem requires that any polygon divides the plane into exactly two connected regions. It appears as THEOREM~9 in the 10th edition of the \emph{Grundlagen}, and all the previous theorems can be seen as setting down the preliminaries required to prove it. It will be the focal point of this thesis.

While the Polygonal Jordan Curve Theorem is relatively easy to prove when we have the full resources of topology and Euclidean geometry to hand, in the very general setting of ordered geometry, the proof is quite involved. In fact, it is reasonably certain that its first published proof by Veblen is invalid, and we shall argue our case for this in Chapter~\ref{chapter:JordanInformal}. Our proof, on the other hand, is on \emph{far} firmer footing, for a major contribution of this thesis is its formal verification.

\section{Verification}
A formal verification consists in translating theorems and proofs to formal logic and then showing that all deductions are valid according to blind symbolic inference rules. The rules are so simple and few that it is easy to guarantee their validity, and thus we can guarantee the validity of any argument expressed in those rules by mechanically checking each step.

Partial verifications of Hilbert's axiomatics have been investigated by Dehlinger et al~\cite{DehlingerFOG} and Meikle and~Fleuriot~\cite{MeikleFleuriotFormalizingHilbert}. What is particularly enticing about the work of Meikle and Fleuriot is their suggestion that there are logical gaps and unstated assumptions in some of Hilbert's prose proofs. We will explain those gaps in Chapters~\ref{chapter:Axiomatics} and~\ref{chapter:Group2Eval}, where we shall try our best to justify them and vindicate Hilbert.

That said, we do not start from the assumption that Hilbert was infallible. Experience tells us that gaps are left open and logical errors easily made when doing synthetic geometry. The axioms place a severe handicap on the mathematician, preventing us initially from using geometric constructions and making observations that are so elementary that it is tempting to assume them implicitly and erroneously. With purely ordered geometry, we have an even more stringent handicap, and so we must be even more careful when trying to prove results. A diagram used to explore a proof can easily mislead by implying constraints that are not formally demonstrable, and so great care must be taken to ensure proofs are valid. We might never be fully confident without a formal verification.

Now the formalisation, if not the verification, of the axiomatics and elementary consequences of Hilbert's \emph{Grundlagen der Geometrie} was anticipated almost immediately. In his review of the text, Veblen~\cite{VeblenHilbertReview} cites Peano, who had already translated Pasch's axiomatisation of projective geometry into a symbolic form. Peano's notation survives to this day and his ideas would inspire Russell~\cite{PrinciplesOfMathematics} to produce the first major formal verification of elementary mathematics in \emph{Principia Mathematica}~\cite{Principia}.

But as Russell found out, verification can be very labour intensive, and when Poincar\'{e} saw the lengths Russell had to go just to verify that 1 is a number, he saw only ``shackles''~\cite{PoincareShackles}, and went so far as to call Peano's aims of verification ``puerile''~\cite{PoincareReview}. The criticisms were thankfully short-sighted. Verification is forcing itself on a reluctant world now that proofs have become so long and convoluted that they cannot always be verified by individual human readers~\cite{WhitherMathematics}, while the shackling pedantry required of Russell and Whitehead's research programme can be greatly alleviated with the help of machines.

\subsection{Computer Assistance}
Surprisingly, even the machine-assisted mechanical verification of Hilbert's text had been anticipated in reviews. Both Veblen and Poincar\'{e} mention mechanical logic machines that had been developed in the 19th century~\cite{LogicMachines} with which it was hoped proofs could be automatically generated. It was early days, and they both overestimated the power of such early machines --- one was limited to syllogisms --- but by the mid-1950s, Herbert Simon had a logic machine which could automatically prove all the theorems in Russell's \emph{Principia}, thereby paving the way for computer assisted verification which could relieve the poor human of the Herculean task of manually deriving the theorems. 

The success of Simon's logic machine had Russell reflect on his manual verification as ``wasted'' effort~\cite{SimonObituary}, but humans were not to be made redundant. Instead, computer assistance empowers them to tackle more complex theories, such as Hilbert's.

A decade after Simon's logic machine came DeBruijn's AUTOMATH project and the first computer \emph{assistant} for formally verifying some real mathematics. It was successfully used to verify Landau's classic text on real analysis~\cite{LandauGrundlagen,LandauAUTOMATH}, and since then, computer assisted verification has had some astounding successes. Take the Four Colour Theorem. This is a century old outstanding problem. Its first 1976 proof was assisted by inscrutable algorithms and was rightly viewed with suspicion, but the whole theorem has now been meticulously verified by Gonthier in an extremely robust verifier~\cite{GonthierFCT}. According to Hales, the verification makes the theorem one of the most well-established results in all of mathematics~\cite{HalesFormalProof}, and Gonthier went on to lead the project verifying the Feit-Thompson Theorem~\cite{FeitThompson}, a milestone in a potential verification of the classification of all finite simple groups. Finally, the verification of the outstanding four century old Kepler Conjecture has only recently been accomplished~\cite{flyspeck}. 

\subsection{Readable Verifications}
A modern verification consists of code needed to drive and guide a computerised proof assistant, which can mechanically check the validity of inferences used in a symbolic proof. We want this code to be a possible substitute for synthetic prose proofs, and retain the same visual appeal. We want readers to be able to follow the steps of the verification, perhaps drawing diagrams, and see results emerge that match our geometric intuition.

We have therefore adopted the \emph{declarative style} of verification which aims to be close to the ``mathematical vernacular''~\cite{MizarMathematicalVernacular}, and which respects the logical progressions typical of synthetic geometry. Just as in synthetic geometry, we reason to our theorems by introducing geometric entities, obtaining configurations of points, lines and planes. We then use our axioms to derive interesting properties of the configurations.

This proves challenging, because of an observation made in the AUTOMATH project which has largely stood up: there is a wide gulf between mathematical proofs as they appear in the literature and verification code. The inferential leaps that a human mathematician makes when writing a prose proof are multiplied to many formal steps in the verification, and the term ``DeBruijn factor'' was coined for the multiplier. 

The blow up can be seen in Meikle and Fleuriot's work~\cite{MeikleFleuriotFormalizingHilbert}, and our own earlier work~\cite{ScottMScThesis}, where many verification steps are needed for a single prose step, a fact which often obscures the intuition behind the proof. We did not find this acceptable. We were not prepared to sacrifice intuition on the altar of verification.

\section{Contributions and Organisation}
In the next chapter, we give an overview of the computerised proof assistant and the logic upon which we implemented all the ideas for this thesis. In Chapter~\ref{chapter:Axiomatics}, we present our formalisation of Hilbert's axioms, and try to explain why the axioms make verifications so much more long-winded than their prose counterparts. We also state and verify a theorem~(Proposition~\ref{eq:PlaneThree}) that Hilbert may have neglected and which, to our knowledge, has not been previously verified from these axioms.

In Chapter~\ref{chapter:Automation}, we present new algorithms based on streams of proof trees, which define a general-purpose algebra for partitioning and searching domains of interest. We show how to tailor this algebra to theorem-proving, and then apply it specifically to Hilbert's axioms. Then, in Chapter~\ref{chapter:Group2Eval}, we show how the automation provided by our search algebra can greatly reduce the amount of code needed to verify theorems. In fact, we show that our verifications become almost structurally identical to Hilbert's prose, with each verification step formalising an inference in the prose. These theorems have been verified elsewhere, but we provide the first verifications which match the natural language proofs so closely.

In Chapters~\ref{chapter:LinearOrder} and~\ref{chapter:HalfPlanes}, we verify Hilbert's theorems leadings up to his statement of the Polygonal Jordan Curve Theorem. In the first of these chapters, we show how to carve out the natural numbers geometrically without needing the axiom of infinity, and we then show how our verification of Hilbert's theorems allows us to reduce problems of ordering on the line to inequalities of natural numbers.

Our remaining chapters cover the verification of the Polygonal Jordan Curve Theorem from the very weak axioms of ordered geometry. In Chapter~\ref{chapter:JordanInformal}, we give a mostly informal discussion of the theorem, before discussing problems with Veblen's first proof. In Chapter~\ref{chapter:JordanFormalisation}, we present our formalisation of the theorem, leaving the details of the verification to Chapters~\ref{chapter:JordanVerification1} and~\ref{chapter:JordanVerification2}.

The proof and verification are both original, and because of the automation we provide in Chapters~\ref{chapter:Automation} and~\ref{chapter:LinearOrder} and based on the evidence from Chapter~\ref{chapter:Group2Eval}, we hope that much of our verification code is structurally similar to what we would expect of a fully elaborated prose proof.

There is plenty of commentary about Hilbert's axiomatics throughout this thesis. This is necessary, because formalising and verifying proofs forces us to make decisions with a pedantry that even mathematicians might consider debilitating. The process of teasing out logical distinctions and subtle paths of inference, and tracing dependencies between results, puts us in a strong position from which to commentate. So we include many observations about Hilbert's approach in stating theorems and proofs, some neutral, some critical, and we make these remarks with great precision and confidence: the application of formal verification and theorem proving in studying the logic of practised mathematics can be likened to the use of the microscope in studying biology.

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../thesis"
%%% End:
