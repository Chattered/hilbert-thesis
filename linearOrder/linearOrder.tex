\chapter{Infinity and Linear Ordering}\label{chapter:LinearOrder}
The next theorem on the agenda is THEOREM~6, and in this chapter, we will look at two different ways to deal with it formally. The theorem itself tells us that any finite set of points on a line is linearly ordered in terms of betweenness. One approach to formalising this is at the meta-level, where it can be treated as an algorithm for enumerating cases of betweenness. In another approach, we can formalise the theorem at the object level and verify it. In so doing, we shall derive the axiom of infinity, thereby showing the axiom redundant given Hilbert's geometric axioms.

\section{THEOREM 6 at the Meta-level}\label{sec:Theorem6}
We ended the last chapter by discussing two of the three parts of Hilbert's proof of THEOREM~5. The third and final part of the proof can be generalised to verify THEOREM~6.

\begin{quotation}
  THEOREM 6 (generalisation of THEOREM~5). Given any finite number of points on a line it is always possible to label them $A$, $B$, $C$, $D, \ldots, K$ in such a way that the point labelled $B$ lies between $A$, and $C$, $D$, $E, \ldots, K$, the point labelled $C$ lies between $A$, $B$ and $D$, $E,\ldots K,$ $D$ lies between $A$, $B$, $C$ and $E, \ldots,$ etc. Besides this order of labelling there is only the reverse one that has the same property.
  \flushright{\cite[pp. 7-8]{FoundationsOfGeometry}}
\end{quotation}

It strikes us that a \emph{labelling} of points is a syntactic device, a reference to the symbols used to mention points rather than a reference to the points themselves. Thinking more formally, we could identify a labelling with an assignment of values to variables. The existence of a labelling is then the existence of these assignments. With this in mind, a first pass at trying to faithfully formalise THEOREM~6 could view it as a \emph{schema}, asserting that, given some points on a line $A'$, $B'$, $C'$, $D'$, $\ldots$, $K'$, there exists an appropriate assignment to the points $A$, $B$, $C$, $D$, $\ldots$, $K$:
\begin{equation*}
  \begin{split}
    &\exists a.\;\code{on\_line}\ A'\ a\wedge\code{on\_line}\ B'\ a\wedge\code{on\_line}\ C'\ a\wedge\code{on\_line}\ D'\ a\\
    &\qquad\wedge\code{on\_line}\ E'\ a\wedge\cdots\wedge\code{on\_line}\ K'\ a\\
    &\implies\exists A.\;\exists B.\;\exists C.\;\exists D.\; \ldots\;\exists K.\; \\
    &\qquad\qquad A = A' \wedge B = B' \wedge C = C' \wedge D = D' \wedge E = E' \wedge \cdots \wedge K = K'\\
    &\qquad\quad\wedge\left(\begin{split}&\between{A}{B}{C} \wedge \between{A}{B}{D} \wedge \between{A}{B}{E} \\ &\qquad\wedge\cdots \wedge \between{A}{B}{K}\end{split}\right) \\
    &\qquad\quad\wedge
    \left(\begin{split}&\between{A}{C}{D} \wedge \between{A}{C}{E} \wedge \cdots \wedge \between{A}{C}{K}\\
        &\wedge\between{B}{C}{D} \wedge \between{B}{C}{E} \wedge \between{B}{C}{K}\\
        &\qquad\wedge \cdots \wedge \between{B}{C}{K}
      \end{split}\right)\\  
    &\qquad\quad\wedge
    \left(\begin{split}&\between{A}{D}{E} \wedge \cdots \wedge \between{A}{D}{K} \\
        &\wedge\between{B}{D}{E} \wedge \cdots \wedge \between{B}{D}{K} \\
        &\wedge\between{C}{D}{E} \wedge \cdots \wedge \between{B}{D}{K}
        \end{split}\right)\\
    &\qquad\quad\vdots
  \end{split}
\end{equation*}

This is not a formula of higher-order logic. Instead, as a schema, it tells us that as we fix our choice of variables $A', B', C', D', E', \ldots, K'$, we are expected to fill in the holes by continuing a syntactic pattern.

Alternatively, we could say this is a metatheorem, something surprisingly typical of mathematics. As noted by Harrison~\cite{FormalizedMathematics}, the existence of such theorems must be borne in mind when formalising, and he mentions the simple example of an object theorem about certain operations being associative and commutative (say, addition), which entails the \emph{metatheorem} that brackets (bits of syntax) can be dropped without ambiguity.

Hilbert was working before any distinction had been made between meta-level and object level, let alone the sort of hard distinction we now have between HOL and the computational metalanguage ML which encodes its syntax and inference rules. With such a distinction, we immediately realise that our schema above can be formalised as an ML function which inputs a list of points, instantiates the schema to create a HOL formula, and then derives it as a theorem.

\subsection{Representation}
Consider applying THEOREM~6 to the special case of THEOREM~5 where there are only four points $A'$, $B'$, $C'$, $D'$ and four labels $A$, $B$, $C$ and $D$. The formula we must verify is:
\begin{equation*}
  \begin{split}
    &\exists a.\;\code{on\_line}\ A'\ a\wedge\code{on\_line}\ B'\ a\wedge\code{on\_line}\ C'\ a\wedge\code{on\_line}\ D'\ a\\
    &\implies\exists A.\;\exists B.\;\exists C.\;\exists D.\; A = A' \wedge B = B' \wedge C = C' \wedge D = D'\\
    &\qquad\quad\wedge\between{A}{B}{C} \wedge \between{A}{B}{D}\wedge\between{A}{C}{D}\wedge\between{B}{C}{D}.
  \end{split}
\end{equation*} 

Now we can ``unwind'' this existential into the disjunction given in Figure~\ref{fig:Theorem5CasesFormalised}, and thus obtain a concrete formalisation of THEOREM~5. It is rather verbose though, and as we increase the number of points, the number of disjuncts will explode. 

Hilbert does not state THEOREM~6 with any efficiency in mind, as he lists all possible betweenness relations among the points considered. We shall not be so wasteful, and will control the blow-up by finding a concise, canonical representation of the linear order of points on a line. The constraint is that we should be able to quickly derive any member of the full set of betweenness relations from the canonical representation.

\begin{figure}
  \begin{align*}
    &\fourbetlong{A'}{B'}{C'}{D'}\\
    &\vee\fourbetlong{A'}{B'}{D'}{C'}\\
    &\vee\fourbetlong{A'}{C'}{B'}{D'}\\
    &\vee\fourbetlong{A'}{C'}{D'}{B'}\\
    &\vee\fourbetlong{A'}{D'}{B'}{C'}\\
    &\vee\fourbetlong{A'}{D'}{C'}{B'}\\
    &\vee\fourbetlong{B'}{A'}{C'}{D'}\\
    &\vee\fourbetlong{B'}{A'}{D'}{C'}\\
    &\vee\fourbetlong{B'}{C'}{A'}{D'}\\
    &\vee\fourbetlong{B'}{D'}{A'}{C'}\\
    &\vee\fourbetlong{C'}{A'}{B'}{D'}\\
    &\vee\fourbetlong{C'}{B'}{A'}{D'}.
  \end{align*}
\caption{THEOREM~5 case-split}
\label{fig:Theorem5CasesFormalised}
\end{figure}

Firstly, we must note the fact that Hilbert's geometry has no preferred orientation. For instance, there is no preferred $x$, $y$ and $z$ direction and no preferred clockwise or anticlockwise direction for three non-collinear points. This is in contrast to coordinate free methods such as the signed-area method~\cite{SignedAreaMethod}. But in Hilbert's geometry, we \emph{can} treat the first argument to the between predicate as a parameter giving the preferred origin. Then, we can regard the partially applied relation as an ordering on every possible ray emanating from the origin. More precisely, we can read $\between{A}{B}{C}$ as saying that $B<C$ from the perspective of origin $A$ and direction $\overrightarrow{AB}$.

We can then represent total orders as conjunctions ordering adjacent points. So, if $A,B,C,D,E,F,G,H$ occur along a line in that order, we just need the six conjuncts
\begin{multline}\label{theorem:OrderRepExample}
\Gamma \vdash \between{A}{B}{C} \wedge \between{A}{C}{D} \wedge \between{A}{D}{E}\\
\wedge\between{A}{E}{F}\wedge\between{A}{F}{G}\wedge\between{A}{G}{H}.
\end{multline}

We want to retrieve all other betweenness relations implied by this sequent quickly. Before we describe how we do this, we will separate THEOREM~5, whose verification we considered in the last chapter, into two separate theorems. The first theorem \eqref{eq:five2a} will ``move the origin'' from $A$ to $B$ in our representation. The second theorem \eqref{eq:five2b}, when we understand the $\code{between}$ relation as a binary relation whose first argument is the origin parameter, gives us transitivity.
\begin{gather}
\label{eq:five2a}\vdash \between{A}{B}{C} \wedge \between{A}{C}{D} \implies \between{B}{C}{D}.\\
\label{eq:five2b}\vdash \between{A}{B}{C} \wedge \between{A}{C}{D} \implies \between{A}{B}{D}.
\end{gather}

We now explain our strategy by way of example. Suppose our goal is to derive $\between{C}{F}{H}$ from \eqref{theorem:OrderRepExample}. Since the ordering in \eqref{theorem:OrderRepExample} has origin $A$ and our goal has origin $C$, our first task is to move the origin from $C$ to $A$. To do so, we match the goal against the conclusion of Theorem~ \ref{eq:five2a}, giving the obligation
\begin{displaymath}
\between{A}{C}{F} \wedge \between{A}{F}{H}.
\end{displaymath}

Interpreting \code{between} as a binary relation, we are obliged to show that $C < F$ and $F < H$ with respect to origin $A$ and direction $\overrightarrow{AC}$. The bounds here cover a range of points from $C$ to $H$, and so we split the ordering of \eqref{theorem:OrderRepExample} from $C$ to $H$ into two suborderings either side of~$F$. That is, we extract the two conjunctions
\begin{displaymath}
\between{A}{C}{D} \wedge \between{A}{D}{E} \wedge\between{A}{E}{F}
\end{displaymath}
and
\begin{displaymath}
\between{A}{F}{G}\wedge\between{A}{G}{H}.
\end{displaymath}
We now reason transitively, obtaining $\between{A}{C}{F}$ and $\between{A}{F}{H}$ by folding \eqref{eq:five2b} across their conjuncts:
\begin{align*}
\between{A}{C}{D} &\wedge \between{A}{D}{E} \wedge\between{A}{E}{F}\\
&\longrightarrow \between{A}{C}{E} \wedge \between{A}{E}{F}\\
&\longrightarrow \between{A}{C}{F}
\end{align*}
and
\begin{align*}
\between{A}{F}{G} &\wedge \between{A}{G}{H}\\
&\longrightarrow \between{A}{F}{H}.
\end{align*}

The example here generalises and we have implemented it as a completely deterministic tactic, taking a sequent such as \eqref{theorem:OrderRepExample} and a formula such as $\between{C}{F}{H}$, and then verifying the formula in one pass of the order conjunction.

\subsection{Enumerating Possible Orderings}
Even with the more concise representation, there are $\frac{1}{2}n!$ possible orderings to consider for $n$ points, though in practice, there are constraints on the ordering that allow us to eliminate many of the cases by appealing to Axiom~\ref{eq:g23}. For instance, if we know that $\between{B}{A}{C}$ and $\between{B}{D}{C}$, then there are only two ways to order $A$, $B$, $C$ and~$D$:
\begin{align*}
&\fourbet{B}{A}{D}{C}\\
&\vee\fourbet{B}{D}{A}{C}.
\end{align*}

Factoring in these constraints not only cuts down the size of the final conclusion, but significantly speeds up the calculation of the possibilities. We have thus implemented a procedure to enumerate all possible orderings, taking both a list of the points we want it to order, and a list of betweenness sequents constraining the possibilities.

The algorithm nicely captures the purpose of a metatheorem such as Hilbert's if we see it as a computation on labellings. It also keeps us well within the scope of first-order logic. However, our ML algorithm is only a verification of the particular instances it generates. The algorithm, the metatheorem itself, is unverified. To verify it, we must bring the meta-level down to the object level.

\section{THEOREM~6 at the Object Level}
Any logic which can formalise THEOREM~6 as a theorem rather than a metatheorem will need to include a domain of labellings. Since there is no upper bound on the number of distinct points we can label, this domain will need to be infinite. One such domain appears in Dehlinger et al's verification~\cite{DehlingerFOG} in the form of lists. Our formalisation is equivalent. We treat a labelling as an assignment from an initial prefix of natural numbers to the points being labelled. Formally:
\label{sec:OrderingDef}
\begin{equation}\label{eq:OrderingDef}
  \begin{split}
    \vdash_{def}\;\code{ordering}\ f\ X &\iff X = \left(\left\{f\ n\ \vert\ \code{finite}\ X \implies n < \left|X\right|\right\}\right)\\
    &\wedge \forall n.\;\forall n'.\;\forall n''.\; (\code{finite}\ X \implies n < \left|X\right| \wedge n' < \left|X\right| \wedge n'' < \left|X\right|)\\
    &\qquad\wedge n < n' \wedge n' < n'' \implies \between{(f\ n)}{(f\ n')}{(f\ n'')}.
    \end{split}
\end{equation}

For generality, we have allowed the set $X$ to be infinite, since the notion of ordering can usefully apply to such sets. Indeed, many of our lemmas about orderings go through in the infinite case, for which the implications in \eqref{eq:OrderingDef} with the antecedent $\code{finite}\ X$ become vacuous, allowing $n$ to range over the entire set of natural numbers.\footnote{In HOL~Light, the \code{finite} sets are defined to be the empty set, and all adjoins to all finite sets.} 

With the definition in hand, THEOREM~6 can be formalised in terms of orderings of finite sets.
\begin{equation*}
  \vdash\code{finite}\ X \wedge\code{collinear}\ X \implies \exists f.\; \code{ordering}\ f\ X.
\end{equation*}

\section{Natural Numbers}
Our definition assumes the existence of natural numbers, but Hilbert was not clear whether he took these to be logically primitive. Veblen, writing some years later, is explicit: ``[The axioms] presuppose only the validity of the operations of logic and of counting (ordinal number)''~\cite[p. 344]{Veblenphd}. Hilbert \emph{seems} to be making the assumption implicitly when he states the Archimedean Axiom in his Group~V, though it could be argued that the following is only meant schematically:
\begin{quote}
  ``If $AB$ and $CD$ are any segments then there exists a \emph{number} $n$ such that $n$ segments $CD$ constructed contiguously from $A$, along the ray from $A$ through $B$, will pass beyond the point $B$.'' [emphasis added]
  \flushright{\cite[p. 26]{FoundationsOfGeometry}}
\end{quote}

Euclid does much the same when he expresses the same property using the word ``multiplied'' (though Euclid mistakes this property for a \emph{definition}):
\begin{quote}
  ``Magnitudes are said to have a ratio to one another which can, when multiplied, exceed one another.''
  \flushright{\cite[p.114]{HeathElements}}
\end{quote}

Yet elsewhere, Euclid will discuss natural numbers in geometrical terms: his books on number theory literally identify numbers with line segments. Hilbert is faithful to this idea. He shows how to recover arithmetic operations from geometrical figures by exploiting Pascal's and Desargues' Theorems. So why would either want to assume the existence of natural numbers?

The question of foundations here, whether natural numbers are a primitive logical concept required of the theory, or whether they are to be recovered geometrically, is difficult to answer. So when it comes to formalisation, we have tried to base our decisions on the broad philosophical and historical aims of the text. Pasch, Peano, Hilbert and Veblen are all supposed to be rigorising the synthetic geometry of Euclid's \emph{Elements}. There is a story that Euclid, following on from the first crisis in the foundations of mathematics and the discovery of incommensurable magnitudes, would have regarded natural numbers with suspicion, and thus kept them out of his logical foundation~\cite{EvolutionEuclideanElements}. Instead, numbers were to be grounded on secure geometrical notions.

\subsection{The Axiom of Infinity}
The theorem stating that natural numbers exist is derivable in HOL~Light assuming a domain $ind$ of individuals exists which is Dedekind-infinite, a property formalised as
\begin{equation}\label{eq:InfinityAxiom}
  \exists f : ind\rightarrow ind.\; \code{one\_one}\ f \wedge \neg\code{onto}\ f.
\end{equation}

This asserts that there is a one-one but not onto function $f$ on the set of individuals. From it, we can nominate an arbitrary member of the set \mbox{$\{ i : ind\ \vert\ \neg(\exists i'.\; f\ i' = i) \}$} to serve as the number $0$, nominate $f$ as the successor function, and carve out the natural numbers as the smallest set containing $0$ and its own image under $f$.

The existence of the infinite domain $ind$ is not generally assumed as part of classical logic proper, and Russell, in his classic \emph{Principia Mathematica}, took it as a mere antecedent condition on the results which required it~\cite{LogicismRevisited}. Without the axiom, there are models of the logic for which all domains --- the sets of set theory and the types of simple type theory --- each has only finitely many inhabitants.

This should not be the case for the primitive domains of Hilbert's geometry. Hilbert insists as much for his Theorem~7, which states quite plainly that ``between any two points on a line there exists an infinite number of points.'' 

Since we need an infinite domain for this theorem anyway, it would be rather elegant if we could derive Axiom~\ref{eq:InfinityAxiom} from Hilbert's order axioms. We can then obtain the natural numbers from the theorem, replacing the abstract type $ind$ with a representative type of geometric objects. Our natural numbers will then be quite literally founded in geometry.

Now the axioms of infinity, choice and extensionality are not part of the HOL~Light kernel. Instead, they are asserted with \code{new\_axiom}, exactly as we have asserted the axioms of geometry. Thus, to replace the axiom of infinity, we just do not load its theory file. Instead of asserting the axiom, we load the theory files containing our geometric axioms, and \emph{derive it}. 

After this, we can reload the usual HOL~Light theories which depend on the axiom of infinity, thus reproducing the whole of the HOL~Light standard library from a geometric foundation.

\subsection{Models and a Finite Interpretation}\label{sec:FiniteModel}
The fact that Hilbert's domains are infinite is not derivable from Group~I. We can verify this by exhibiting a finite model of the Group~I axioms. To do so, we define a two-place predicate \code{Group\_I} over arbitrary relations $l$ and $p$. By instantiating the polymorphic types of these relations, one supplies the domains of the interpretation. We then assert a particular model of the axioms, for appropriate $l$ and $p$, using the formula $\code{Group\_I}\ l\ p$.

Incidentally, we have already defined this predicate and used it to assert the Group~I axioms. Having declared our primitive types and our primitive relations, we write
\begin{displaymath}
  \code{new\_axiom}\ (\code{Group\_I}\ \code{on\_line}\ \code{on\_plane}).
\end{displaymath}

We can reuse the predicate $\code{Group\_I}$ to express basic metatheoretical ideas about the Group~I axioms, and if we treat the hypothesis as a \emph{context} of axioms, we could even use it to write a \emph{module} of incidence proofs. 

In general, there are significant weaknesses to this approach. For one, we are limited in how much we can reason about theories of polymorphic values. As we explained in Chapter~\ref{chapter:Background}, polymorphic types do not increase the expressive power of simple type theory. We cannot quantify over them, and we cannot treat type constructors polymorphically. We would want to do both if we wanted to reason about, say, the theory of monads in Chapter~\ref{chapter:Automation}. This would require a stronger type theory, such as the extension provided by HOL~Omega~\cite{HOLOmega}.

For another weakness, when we want to treat $\code{Group\_I}$ as a module of theorems, we would have no convenient way to make new definitions or abstract out new types. This would require a more sophisticated embedding such as the one underlying Isabelle's locales~\cite{IsabelleLocales}.

These issues are not a problem for the specific purposes of this chapter, where we only have to consider a very simple metatheoretical question, but it could cause problems with metatheoretical reasoning in later groups such as Group~III where axioms are defined based on quite complex and derived definitions.

\subsubsection{Verification}
A finite model of Group~I is realised in the four vertices, six lines, and four planes of a tetrahedron. In this finite interpretation, we can translate all our first-order axioms into propositional theorems and verify them with a tautology checker.

To capture this idea formally, we carved out two finite types. One type is inhabited by four constructors which can be used as interpretations of the four points and the four planes in our model. The other type is inhabited by six constructors, which become our six lines.
\begin{align*}
\code{ps}   &= \code{p1} \vert \code{p2} \vert\code{p3} \vert\code{p4}\\
\code{lines}&= \code{l1} \vert \code{l2} \vert\code{l3} \vert\code{l4} \vert\code{l5} \vert\code{l6}.
\end{align*}

The type definitions are used to automatically derive an abstract type and derive two theorems, an induction theorem and a recursion theorem. For the type \code{ps}, for instance, we are given
\begin{align*}
&\vdash\forall P.\; P\ \code{p1}\ \wedge\ P\ \code{p2}\ \wedge\ P\ \code{p3}\ \wedge\ P\ \code{p4}\implies\forall p.\; P\ p.\\
&\vdash\forall p1.\;\forall p2.\;\forall p3.\;\forall p4.\; \exists f.\; f\ \code{p1} = p1\ \wedge\ f\ \code{p2} = p2\ \wedge\ f\ \code{p3} = p3\ \wedge\ f\ \code{p4} = p4.
\end{align*}

The first (induction) theorem can be promoted to an equivalence, and then used to rewrite all universally quantified formulas as finite conjunctions. Similarly, its rewrite using the infinite DeMorgan rule, $(\forall x.\; P\,x) \iff \neg\exists x.\; \neg (P\,x)$ can be used to rewrite all existentially quantified formulas as finite disjunctions.

Next, by instantiating the universally quantified variables in the second (recursion) theorem with the first four natural numbers respectively, we can prove that \code{p1}, \code{p2}, \code{p3} and \code{p4} are mutually distinct. From this, every valid first-order formula over the types \code{ps} and \code{lines} can be rewritten to a propositional formula and then quickly verified.

To verify our model, we inductively define the incidence predicates \code{on\_line} and \code{on\_plane} over the types \code{ps} and \code{lines}, as shown in Figure~\ref{fig:SmallestModel}. We then verify the following theorem in HOL~Light 
\begin{displaymath}
\vdash\code{Group1}\ \code{on\_line}\ \code{on\_plane}.
\end{displaymath}

\begin{figure}
\begin{minipage}[c]{10cm}
\begin{align*}
\vdash_{def}\;&\online{\code{p1}}\code{l1}\wedge \online{\code{p2}}\code{l1}\\
\wedge & \online{\code{p1}}\code{l2}\wedge \online{\code{p3}}\code{l2}\\
\wedge & \online{\code{p2}}\code{l3}\wedge \online{\code{p3}}\code{l3}\\
\wedge & \online{\code{p1}}\code{l4}\wedge \online{\code{p4}}\code{l4}\\
\wedge & \online{\code{p2}}\code{l5}\wedge \online{\code{p4}}\code{l5}\\
\wedge & \online{\code{p3}}\code{l6}\wedge \online{\code{p4}}\code{l6}\\
\\
\vdash_{def}\;& \onplane{\code{p1}}{\code{p1}}\wedge \onplane{\code{p2}}{\code{p1}}\wedge \onplane{\code{p3}}{\code{p1}}\\
\wedge & \onplane{\code{p1}}{\code{p2}}\wedge \onplane{\code{p2}}{\code{p2}}\wedge \onplane{\code{p4}}{\code{p2}}\\
\wedge & \onplane{\code{p1}}{\code{p3}}\wedge \onplane{\code{p3}}{\code{p3}}\wedge \onplane{\code{p4}}{\code{p3}}\\
\wedge & \onplane{\code{p2}}{\code{p4}}\wedge \onplane{\code{p3}}{\code{p4}}\wedge \onplane{\code{p4}}{\code{p1}}
\end{align*}\end{minipage}\centering\hspace{-2cm}\includegraphics[scale=0.8]{linearOrder/Tetra}
\caption{Minimal model}
\label{fig:SmallestModel}
\end{figure}

After unfolding the definitions of $\code{on\_line}$ and $\code{on\_plane}$, it turns out that the theorem can be proven by equational reasoning alone. We replace the universals and existentials with conjunctions and disjunctions respectively. After simplifying, the remaining goals require us to show that points, lines or planes are distinct, which is dealt with by the recursion theorem.

The same method allows us to formally deal with the case of a weakened Axiom~\ref{eq:g13a} that we mentioned briefly in \S\ref{sec:DanglingPoints}. We just define a seven element finite set for the lines, and use the same inductive definitions for \code{on\_line} and \code{on\_plane}, leaving the seventh line ``dangling'' without any incident points. Again, by rewriting the axioms propositionally and simplifying, we can show that this is a (presumably inappropriate) model for the weakened axioms, and thus justify our formalisation of Axiom~\ref{eq:g13a}.

To show that the tetrahedral model is minimal, we verified that there exist at least the four points, six lines and four planes satisfying the conditions we gave to inductively define \code{on\_line} and \code{on\_plane} in the model. To do this, we use Theorem~\ref{eq:PlaneThree} which gives us three distinct points on a plane. We then use Axiom \ref{eq:g18}, showing that there is a fourth point not on this plane. The remaining axioms are then sufficient to connect each pair of points by a unique line, and every triple of points by a unique plane.

\section{Infinity}\label{sec:Infinity}
Once in Group~II, there are only infinite models. Indeed, we can just apply Axiom~\ref{eq:g22} repeatedly to obtain an arbitrary number of points. That is, starting with distinct points $A$ and $B$, we can obtain points $A$, $B$, $C$, $D$, $E$, $\ldots$, $Y$, $Z$, satisfying 
\begin{align*}
&\between{A}{B}{C}\\
&\between{A}{C}{D}\\
&\between{A}{D}{E}\\
&\ldots\\
&\between{A}{Y}{Z}.
\end{align*}

If we apply THEOREM~5, then we can move from theorems such as $\between{A}{B}{C}$ and $\between{A}{C}{D}$ to $\between{A}{B}{D}$, and so can prove that the points above are mutually distinct. Therefore, for any number $n$, we can prove a theorem saying there must be $n$ distinct points. The domain of interpretation must be infinite.

\section{A Geometric Successor}
The function which is said to exist in the axiom of infinity is a successor function. When we derive it as a theorem, we shall obtain its witness, and, staying faithful to geometry, we shall use a witness that is effectively a function from a point to a distinct point on a line segment. The witness is based on the diagram in Figure~\ref{fig:successor}.

\begin{figure}
\centering\includegraphics[scale=0.5]{linearOrder/InfinitySteps}
\caption{The successor function}
\label{fig:successor}
\end{figure}

\begin{figure}
\centering\includegraphics[scale=0.5]{linearOrder/InfinityFull}
\caption{Successors tending to $A$}
\label{fig:FullSuccessor}
\end{figure}

Formally, the diagrams are the sets of points satisfying the following formalised constraint
\begin{equation}\label{theorem:IndConstraint}
\begin{aligned}
&\Triangle{a}{A}{B}{0}\\
&\qquad\wedge \between{A}{D}{B} \wedge \between{B}{0}{C}\\
&\qquad\wedge (\between{A}{N}{0} \vee N = 0).
\end{aligned}
\end{equation}

Our natural numbers are carved out from the set of all diagrams satisfying this constraint. We abstract this set into a type ($\code{ind}$), giving us two functions: an abstraction function $\code{mk\_ind}$ which promotes any diagram into the abstract type, and a representation function $\code{dest\_ind}$ which converts an inhabitant of the abstract type into its diagram representation. In order for this to be sound, we only need to prove that the type will have at least one inhabitant. This is easily settled, since the diagram for $0$ is constructed in the proof of THEOREM~3 (\S\ref{sec:Theorem3}). 

Each diagram is represented by six points, five of which are fixed by the successor function, while the sixth point $N$ starts at $0$ and moves step-by-step towards $A$. The points $C_1$, $C_2$ and $C_3$, shown in Figure~\ref{fig:successor}, are not explicitly represented in our type but can be determined as the intersection of $BN$ and $CD$.

Informally, and for the purposes of explaining our formalisation, we identify a diagram up to a relabelling of the first five points, and thus identify it with its sixth point. In this way, when we talk of the object $0$, we may be referring to the \emph{diagram} 0, which is the six-tuple representing inhabitants of $\code{ind}$, or to the \emph{point} 0, which is the sixth component of this six-tuple. Similarly, we shall talk about the \emph{diagram} that is the successor of 0, as well as the \emph{point} that is the successor of 0. This is just for convenience here. The formalisation itself is always unambiguous.

Thus, the successor of $0$ is the diagram obtained by replacing $0$ with $1$, the intersection of $CD$ and $A0$. To obtain the next successor, we first find the intersection of $1B$ and $AC$, namely the point $C_1$. We then replace $1$ with the intersection of $C_1D$ and $A0$. 

In general, the successor of a diagram is obtained by finding $C'$, the intersection of $BN$ and $AC$, and then finding the intersection of $C'D$ and $A0$. The definition is formalised in Figure~\ref{fig:sucDefinition}.\label{sec:UseOfIota}
\begin{figure}
\begin{align*}
\vdash_{def}\; \code{ind\_suc}\, n =& \code{let } (A,B,C,D,0,N) = \code{dest\_ind}\ n \code{ in}\\
&\quad \code{mk\_ind} (A,B,C,D,0,\iota S.\\
&\quad\qquad \exists C'.\; (\exists a.\;\online{B}{a} \wedge \online{C'}{a} \wedge \online{N}{a})\\
&\qquad\qquad \wedge (\exists a.\;\online{C'}{a} \wedge \online{D}{a} \wedge \online{S}{a})\\
&\qquad\qquad \wedge (\exists a.\;\online{A}{a} \wedge \online{C}{a} \wedge \online{C'}{a})\\
&\qquad\qquad \wedge \between{A}{S}{0} \wedge \between{A}{S}{N}).
\end{align*}
\caption{Definition of \code{ind\_suc}}
\label{fig:sucDefinition}
\end{figure}

We have used the $\iota$ operator in this definition. This is the ``definite description'' operator, which is a weaker version of the $\epsilon$ ``indefinite description operator''. The $\epsilon$ operator is specified by one of the three classical axioms of higher-order logic, and is equivalent to the full axiom of choice.
\begin{displaymath}
\vdash \forall P.\;\forall x.\; P\ x \implies P (\epsilon x.\; P x).
\end{displaymath}

From $\epsilon$, we can define the $\iota$ operator, which requires that the predicate $P$ is satisfied by exactly one value. 
\begin{displaymath}
  \vdash (\iota x.\; P\ x) = \epsilon x.\; P\ x \wedge \forall y.\; P\ y \implies x = y.
\end{displaymath}

By using this operator and avoiding the somewhat controversial stronger axiom of choice, we feel we are in a better position to argue that we have recovered the axiom of infinity in a logically ``secure'' way. The images of our successor function are uniquely defined from their predecessors, and the natural numbers themselves can be uniquely carved out of the type $\code{ind}$. There is exactly one object $0$ up to relabellings of the points in our figures, not an arbitrary set of possibilities in an abstract type from which we choose one example.

The price comes in the complexity of the $\code{ind}$ representatives. We cannot simply define an infinite domain of points using Axiom~\ref{eq:g22} as we did at the beginning of this section. We need enough information in each of our figures to constrain the possible placement of successors relative to their predecessors.

\subsection{Lemmas}
Our successor function above destructs an abstract diagram into its six points, chooses the unique point $S$, and finally rebuilds the diagram. 

We now need some lemmas concerning $\code{dest\_ind}$. Importantly, we need to show that the reconstructed diagram represents an abstract diagram, and thus show that the image of $\code{mk\_ind}$ in our definition is well-defined. The formal theorem is given in Figure~\ref{fig:sucWellDefined}.
\begin{figure}
\begin{align*}
\vdash \code{dest\_ind}\ &(\code{ind\_suc}\ n) =  \code{let } (A,B,C,D,0,N) = \code{dest\_ind}\ n \code{ in}\\
&\quad (A,B,C,D,0,\iota S.\\
&\quad\quad \exists C'.\; (\exists a.\;\online{B}{a} \wedge \online{C'}{a} \wedge \online{N}{a})\\
&\qquad\quad \wedge (\exists a.\;\online{C'}{a} \wedge \online{D}{a} \wedge \online{S}{a})\\
&\qquad\quad \wedge (\exists a.\;\online{A}{a} \wedge \online{C'}{a} \wedge \online{D}{a})\\
&\qquad\quad \wedge \between{A}{S}{0} \wedge \between{A}{S}{N}).
\end{align*}
\caption{Images of \code{ind\_suc} are are well-defined}
\label{fig:sucWellDefined}
\end{figure}

The key step needed to verify this theorem comes from realising that the diagrams involving the points $A,B,C,0,D$ and $A,B,C',N,D$ satisfy the same constraints. So in each case, we can apply Pasch's axiom \eqref{eq:g24} to $\triangle AB0$ and the line $C'D$ to obtain a point $S$ between $A$ and $0$. For our initial diagram, where $C' = C$, we can apply this argument directly. For the other diagrams, we just need to find the point $C'$.

To do this, we apply Pasch's axiom \eqref{eq:g24} to $\triangle A0C$ and the line $BN$, to place the point $C'$ between $A$ and $C$. We can then locate $S$ between $A$ and $N$. Finally, since $N$ is between $A$ and $0$, \ref{eq:five} shows that the point $S$ must also lie between $A$ and $0$. 

\section{Theorem of Infinity}
Finally, we must verify that our function is one-one but not onto. Verifying that $\code{ind\_suc}$ is one-one just means verifying that $\code{ind\_suc}\ m = \code{ind\_suc}\ n$ always implies that \mbox{$m = n$}. Geometrically, this means identifying points in a diagram, and with our discoverers this turned out to be easy. Using the tactic \code{discover\_tac by\_eqs}, the incidence automation could find all the necessary equalities that arise from the assumption $\code{ind\_suc}\ m = \code{ind\_suc}\ n$ automatically.

We verified the fact that \code{ind\_suc} is not onto declaratively. The basic verification works by noting that $0$ defines the first diagram, while all images of $\code{ind\_suc}$ use a point $S$ which is defined to be strictly between $A$ and $0$. Thus, $0$ is not in the image of the function. 

Putting the two facts together, we verify:
\begin{equation*}
\vdash\code{one\_one}\ \code{ind\_suc} \wedge \neg\code{onto}\ \code{ind\_suc}.
\end{equation*}

This tells us that the abstract type $\code{ind}$ has an infinite domain. However, the domain is \emph{not} isomorphic to the natural numbers. It consists at least of the diagrams where the point $N$ is any point lying between $A$ and $0$, and infinitely many of these are not in the sequence
\begin{displaymath}
0, \code{ind\_suc } 0, \code{ind\_suc }(\code{ind\_suc } 0), \code{ind\_suc }(\code{ind\_suc }(\code{ind\_suc } 0)),  \ldots.
\end{displaymath}
For instance, no point between $0$ and $\code{ind\_suc}\ 0$ is in this sequence.

To remove the unwanted diagrams, we follow HOL~Light's construction of the natural numbers, which inductively restricts us to the smallest closure of the successor function starting from $0$. 

\section{THEOREM~6 Revisited}
With the natural numbers defined, our definition of ordering \eqref{eq:OrderingDef} goes through. We can now verify \ref{eq:six}. We do it in two parts.

\subsection{At Least One Ordering}
Hilbert notes that THEOREM~6 is a generalisation of THEOREM~5, and it turns out that we prove it by generalising the last part of the proof of THEOREM~5. We did not give this part of the proof in the previous chapter. We give it now in Figure~\ref{fig:Theorem5Cases}

\begin{figure}
\framebox{\begin{minipage}{\boxwidth}Now let any four points on a line be given. Take three of the points and label $Q$ the one which by THEOREM~4 and Axiom~II,~3 lies between the other two and label the other two $P$ and $R$. Finally, label $S$ the last of the four points. By Axiom~II,~3 and THEOREM~4 again it follows then that the following five distinct possibilities for the position of $S$ exist:
\\

\indent $R$ lies between $P$ and $S$,\\
\indent or $P$ lies between $R$ and $S$,\\
\indent or $S$ lies between $P$ and $R$ simultaneously when $Q$ lies between $P$ and $S$,\\
\indent or $S$ lies between $P$ and $Q$,\\
\indent or $P$ lies between $Q$ and $S$.
\\

The first four possibilities satisfy the hypotheses of [the second lemma] and the last one satisfies those of [the first lemma]. THEOREM~5 is thus proved.
\flushright{\cite[p. 7]{FoundationsOfGeometry}}
\end{minipage}}
\caption{Case-analysis for THEOREM~5}
\label{fig:Theorem5Cases}
\end{figure}

For the purposes of verification, we probably want to tidy up Hilbert's case-analysis. We first take Hilbert's last three clauses as a nested case-analysis. Then the last case is contradictory and can be discarded. We are left with:
\begin{displaymath}
\begin{cases}
$R$ \text{ lies between } $P$ \text{ and } $S$,\\
$P$ \text{ lies between } $R$ \text{ and } $S$,\\
$S$ \text{ lies between } $P$ \text{ and } $R$,
\begin{cases}
  $Q$ \text{ lies between } $P$ \text{ and } $S$,\\
  $S$ \text{ lies between } $P$ \text{ and } $Q$.
\end{cases}
\end{cases}
\end{displaymath}

Hilbert says the case-analysis arises from applications of \ref{eq:four}, which tells us that of three points, one lies between the other two. When we generalise from four points to $n+1$ points, we apply induction, and two of the applications of \ref{eq:four} become applications of our inductive hypothesis to $n$ points. We give the generalised proof now together with some verified lemmas. We follow the original proof closely to show how the inferences become generalised.

\begin{proposition}[THEOREM~6]
Given any finite number of points on a line it is always possible to label them $A$, $B$, $C$, $D, \ldots, K$ in such a way that the point labelled $B$ lies between $A$, and $C$, $D$, $E, \ldots, K$, the point labelled $C$ lies between $A$, $B$ and $D$, $E,\ldots K,$ $D$ lies between $A$, $B$, $C$ and $E, \ldots,$ etc.
\end{proposition}
\begin{proof}
The case for $1$ and $2$ points is trivial. The case for three points is covered by THEOREM~4. Assume, for induction, that the theorem holds for $n$ points.

Now let $n+1$ points on a line be given. Take $n$ of the points and label $P$, $Q_1$, $Q_2$, $\ldots$, $Q_{n-2}$, $R$ the ones which by our inductive hypothesis are ordered along the line. Finally, label $S$ the last of the $n+1$ points. By Axiom~\ref{eq:g23} and \ref{eq:four} it follows then that the following three distinct possibilities for the position of $S$ exist:

\vspace{0.5cm}
\noindent $R$ lies between $P$ and $S$,\\
\noindent or $P$ lies between $R$ and $S$,\\
\noindent or $S$ lies between $P$ and $R$.
\vspace{0.5cm}

In the last case, we apply our inductive hypothesis to the points $P$, $Q_1$, $Q_2$, $\ldots$, $Q_{n-2}$, $S$. For any of the positions of $S$, we can apply the following theorem \eqref{eq:OrderExtend} to label all the points in order:
\begin{gather}
  \begin{aligned}  \label{eq:OrderExtend}
    &\vdash\code{finite}\ X \wedge \code{ordering}\ f\ X \wedge \between{(f 0)}{(f (|X| - 1))}{x}\\
    &\qquad \implies \exists g.\; \code{ordering}\ g\ (\{x\} \cup X)
  \end{aligned}\\
  \vdash_{def}\; \code{bounds}\ P\ Q\ X \iff P,Q \in X \wedge \forall R.\; R \in X - \{P,Q\} \implies \between{P}{R}{Q}\notag\\
  \begin{aligned}  \label{eq:ChooseOrder}
    &\vdash x \in X \wedge \code{finite}\ X \wedge \code{ordering}\ f\ X \wedge \code{bounds}\ P\ Q\ X\\
    &\qquad\implies\exists f'.\; \code{ordering}\ f'\ X \wedge f'\,0 = P \wedge f'\,(|X| - 1) = Q.
  \end{aligned}
\end{gather}
\end{proof}
We have replaced Hilbert's reference to his earlier parts of \ref{eq:five} with a reference to its generalisation in Theorem~\ref{eq:OrderExtend}. We actually need a few other theorems. Consider that after our final application of the inductive hypothesis, we will have two orderings $f$ and $g$. The ordering $f$ runs $P,$ $Q_1$, $Q_2$, $\ldots$, $Q_{n-2},$ $R$, and the ordering $g$ runs $P$, $Q_1$, $Q_2$, $\ldots$, $Q_{n-2}$, $S$. But this is a notational shortcut, as we gloss over the implicit assumption that we have chosen the orders such that $f(0) = g(0) = P$. In our verification, we can make this reasoning explicit with Theorem~\ref{eq:ChooseOrder}, which uses the auxiliary concept of \code{bounds}.

Our generalised proof handles its case-analyses by one application of THEOREM~4, and two applications of the inductive hypothesis. This means we must apply well-founded induction rather than normal structural induction, since we must instantiate our inductive hypothesis in two different ways. 

The base case of the induction is captured in two lemmas:
\begin{displaymath}
  \begin{aligned}
    &\vdash \exists f.\; \code{ordering}\ f\ \emptyset.\\
    &\vdash \code{collinear} \{x,y,z\} \implies \exists f.\; \code{ordering}\ f\ \{x,y,z\}.
  \end{aligned}
\end{displaymath}

The case for the empty set is trivial: any function witnesses the existential, since the conditions on the function are all vacuous. The second case actually breaks down into four separate cases, depending on whether any of the $x$, $y$ or $z$ are equal. For a single point, we can pick the constant function to that point, and for two points $x \neq y$, we pick the function which maps $0$ to $x$ and everything else to $y$.

For three points $\between{P}{Q}{R}$, we have the ordering which maps $0$ to $P$, $1$ to $Q$ and all other numbers to $R$. Since THEOREM~4 requires that, of any three collinear points, one lies between the other two, it follows that there must be an ordering for any three collinear points. This takes care of the base case. And thus, we formally verify:
\begin{equation}
  \label{eq:six}
  \tag{THEOREM~6}
  \begin{split}
    \vdash\code{finite}\ X \wedge \code{collinear}\ X \implies \exists f.\; \code{ordering}\ f\ X.
  \end{split}
\end{equation}

\subsection{Exactly Two Orderings}
Hilbert closes his statement of THEOREM~6 with a remark that had a challenging verification: ``Besides this order of labelling there is only the reverse one that has the same property.''.

To verify this, we began with a lemma: if we have two orders $f$ and $g$ where\linebreak $f(0)~=~g(0)$, then the orders are identical. 
\begin{multline*}
  \vdash\code{ordering}\ f\ X \wedge \code{ordering}\ g\ X \\\wedge f\ 0 = g\ 0
  \wedge (\code{finite}\ X \implies n < |X|) \implies f\ n = g\ n.
\end{multline*}

The verification of this theorem uses induction. Aiming for a contradiction, we assume that $f\ (n+1) \neq g\ (n+1)$ and then consider the relative positions of $f\ 0$, \mbox{$f\ (n+1)$} and $g\ (n+1)$ that arise from \ref{eq:four}. For each possibility, we can apply \ref{eq:five} to show that there will end up being a point in the ordering between $f\ n$ and $f\ (n+1)$, or a point between $g\ n$ and $g\ (n+1)$. Both are impossibilities.

Putting these facts together, we can verify Hilbert's assertion.
\begin{multline*}
%`!f g X. FINITE X /\ ORDERING f X /\ ORDERING g X ==>
%               (!n. (FINITE X ==> n < CARD X) ==> f n = g n)
%               \/ !n. (FINITE X ==> n < CARD X) ==> f n = g (CARD X - n - 1)`
  \vdash\code{finite}\ X \wedge \code{ordering}\ f\ X \wedge \code{ordering}\ g\ X \wedge (\code{finite}\ X \implies n < |X|)\\
  \implies \forall n.\; f\ n = g\ n \vee f\ n = g (|X| - n - 1).
\end{multline*}

We mention this only briefly, because we never apply this theorem in the later verification.

\section{An Ordering Tactic}
\ref{eq:six} says everything one wants to know about the order of a finite number of points on a line, but it is not immediately obvious how to apply it.

One thing we can do with \ref{eq:six} is use it to convert problems involving betweenness into problems of natural numbers. To handle this, we will need to consider what is basically the inverse of the \code{ordering} function, given as $f$ in the theorem in Figure~\ref{fig:sixInverse}.

\begin{figure}
\begin{equation*}
\begin{split}
  \vdash&\code{finite}\ X \wedge \code{collinear}\ X\\
  &\implies \exists f.\; \forall A.\;\forall B.\;\forall C.\;A \in X \wedge B \in X \wedge C \in X \\
  &\qquad\qquad\implies\left(\begin{aligned}&\between{A}{B}{C} \\ &\quad
  \iff (f\ A < f\ B \wedge f\ B < f\ C) \vee (f\ C < f\ B \wedge f\ B < f\ A)\end{aligned}\right)\\
  &\quad\wedge \forall A.\;\forall B.\; A \in X \wedge B \in X \implies (A = B \iff f\ A = f\ B).
\end{split}
\end{equation*}
\caption{Rewriting betweenness to inequalities.}
\label{fig:sixInverse}
\end{figure}

On the assumption that one has a collinear and finite set of points $X$, this theorem allows us to obtain a function $f$ with which we can take goals in terms of betweenness and equalities of points, and rewrite them into inequalities and equalities of natural numbers. Once rewritten, the goal can be solved by HOL~Light's decision procedure for linear arithmetic. The procedure is not particularly efficient, but in practice, we only consider simple betweenness problems (at most, ones involving six points).

For convenience, we have implemented a procedural tactic \code{ORDER\_TAC}, 
which is parameterised on a finite set enumeration (a term of the form $\{P_1,P_2,\ldots,P_n\}$). The tactic instantiates the variable $X$ in the above theorem with the enumeration, uses rewriting to prove that $X$ is finite, and then uses the incidence discoverer from Chapter~\ref{chapter:Automation} to prove that it is collinear. It then obtains the function $f$ and uses it to rewrite the goal. Finally, it hands over to HOL~Light's decision procedure for linear arithmetic, \code{ARITH\_TAC}.

\subsection{Example}
To round up this chapter, we will demonstrate the use of our linear reasoning tactic \code{ORDER\_TAC} by applying it to another theorem which says that there is an infinite number of points between any two others points. We have already effectively proven this theorem using the Dedekind definition of infinite, but here, we use the HOL~Light predicate $\code{infinite}$ which is just the complement of the recursively defined predicate $\code{finite}$.

%In a sense, this has been covered indirectly by Theorem~\ref{eq:Infinity}, but our purpose with that theorem was to settle foundational questions about our logical assumptions, and provide us with enough expressive power to formally verify THEOREM~6. Here, we can be more direct in our formalisation.
\begin{quote}
  ``THEOREM~7. Between any two points on a line there exists an infinite number of points.''
\flushright{\cite[p. 8]{FoundationsOfGeometry}}  
\end{quote}
\begin{equation*}
\vdash P\neq Q \implies \code{infinite}\ \{R\; \vert\; \between{P}{R}{Q}\}.
\end{equation*}

We start our proof by assuming that the set of points between $P$ and $Q$ is finite. We then consider separately whether the set contains fewer than two elements, or whether it contains more than two elements. 

We describe the proof briefly. In the first case, we just use THEOREM~3 twice to find two points between $P$ and $Q$, from which we can obtain a contradiction. In the second case, we get to apply \ref{eq:six}. The basic idea is as follows: we obtain an ordering $f$ of all points between $P$ and $Q$, and then take the first two elements of this ordering, namely $f\ 0$ and $f\ 1$. Via THEOREM~3, we can find a point $R$ that lies strictly between them. According to our assumption, this point must be in the image of $f$. But this contradicts the definition of an ordering.

The part of our verification where we apply our linear ordering tactic might come as a surprise. It is actually used to verify a point glossed over in the last paragraph, namely that $R$ must be in the image of $f$. To show this, we must verify that $R$ lies between $P$ and $Q$.

Before we had implemented our tactic, we tried to verify this matter directly using \ref{eq:four} and \ref{eq:five}, but we gave up. The necessary case-analyses were just not intuitive to us. But \code{ORDER\_TAC} takes care of the matter elegantly.

\fbox{\begin{minipage}{\boxwidth}\setlength\abovedisplayskip{0cm}
\small
\begin{align*}
  &\code{so consider}\ R\ \code{such that}\ \between{(f\ 0)}{R}{(f 1)} & 7\\
  &\code{have}\ \between{P}{(f\ 0)}{Q} \wedge \between{P}{(f\ 1)}{Q}
  \ \code{from}\ 6\ \code{by} \ldots & 8\\
  &\code{hence}\ \between{P}{R}{Q}\ \code{from}\ 6,7\ \code{using}\ \code{ORDER\_TAC}\ \{P,Q,R,f\ 0,f\ 1\}\\
\end{align*}\end{minipage}}\linebreak

\section{Conclusion}
This chapter has been concerned with the theory of linear-ordering based on Hilbert's three-place $\code{between}$ relation, culminating in a tactic for solving problems arranging points along a line by reducing them to a decision procedure for linear problems in natural numbers. The use of natural numbers was explicitly permitted in Veblen's ordered geometry~\cite{Veblenphd}, but not in Hilbert's. We have closed the gap by showing how they can be recovered in higher-order logic from geometry without the axiom of infinity.

We provided another way to deal with ordering problems, by interpreting Hilbert's THEOREM~6 as a metatheorem, and finding a way to express linear problems as efficient stacks of betweenness formulas. The approach is more limited, since it assumes that all points considered in the problem are distinct, and we found that this assumption is too strong in practice, but we might expect it to have better performance in some cases, since it is more carefully tailored to Hilbert's geometry. We leave analysis of this matter to future work, and use the reduction to linear arithmetic for the rest of our verification.

We have now covered all the automation we will need for our verification of the Polygonal Jordan Curve Theorem: in summary, we use a search algebra to handle the implicit incidence reasoning from Group~I, and a tactic to handle linear reasoning from Group~II. These two automated tools will be used extensively for the verifications we discuss in the remaining chapters. 

%%% Local Variables: 
%%% TeX-master: "../thesis"
%%% End: 
